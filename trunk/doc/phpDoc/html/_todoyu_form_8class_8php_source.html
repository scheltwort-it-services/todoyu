<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Todoyu: C:/Programme/xampp/htdocs/todoyu2/core/form/TodoyuForm.class.php Quellcode</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Erzeugt von Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Hauptseite</span></a></li>
      <li><a href="pages.html"><span>Zus√§tzliche&nbsp;Informationen</span></a></li>
      <li><a href="namespaces.html"><span>Namensbereiche</span></a></li>
      <li><a href="annotated.html"><span>Datenstrukturen</span></a></li>
      <li class="current"><a href="files.html"><span>Dateien</span></a></li>
      <li><a href="examples.html"><span>Beispiele</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>Auflistung&nbsp;der&nbsp;Dateien</span></a></li>
      <li><a href="globals.html"><span>Datei-Elemente</span></a></li>
    </ul>
  </div>
<h1>C:/Programme/xampp/htdocs/todoyu2/core/form/TodoyuForm.class.php</h1><a href="_todoyu_form_8class_8php.html">gehe zur Dokumentation dieser Datei</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 &lt;?php
<a name="l00002"></a>00002 <span class="comment">/***************************************************************</span>
<a name="l00003"></a>00003 <span class="comment">*  Copyright notice</span>
<a name="l00004"></a>00004 <span class="comment">*</span>
<a name="l00005"></a>00005 <span class="comment">*  (c) 2009 snowflake productions gmbh</span>
<a name="l00006"></a>00006 <span class="comment">*  All rights reserved</span>
<a name="l00007"></a>00007 <span class="comment">*</span>
<a name="l00008"></a>00008 <span class="comment">*  This script is part of the todoyu project.</span>
<a name="l00009"></a>00009 <span class="comment">*  The todoyu project is free software; you can redistribute it and/or modify</span>
<a name="l00010"></a>00010 <span class="comment">*  it under the terms of the GNU General Public License, version 2,</span>
<a name="l00011"></a>00011 <span class="comment">*  (http://www.gnu.org/licenses/old-licenses/gpl-2.0.html) as published by</span>
<a name="l00012"></a>00012 <span class="comment">*  the Free Software Foundation;</span>
<a name="l00013"></a>00013 <span class="comment">*</span>
<a name="l00014"></a>00014 <span class="comment">*  This script is distributed in the hope that it will be useful,</span>
<a name="l00015"></a>00015 <span class="comment">*  but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<a name="l00016"></a>00016 <span class="comment">*  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the</span>
<a name="l00017"></a>00017 <span class="comment">*  GNU General Public License for more details.</span>
<a name="l00018"></a>00018 <span class="comment">*</span>
<a name="l00019"></a>00019 <span class="comment">*  This copyright notice MUST APPEAR in all copies of the script!</span>
<a name="l00020"></a>00020 <span class="comment">***************************************************************/</span>
<a name="l00021"></a>00021 
<a name="l00029"></a><a class="code" href="class_todoyu_form.html">00029</a> <span class="keyword">class </span><a class="code" href="class_todoyu_form.html">TodoyuForm</a> <span class="keyword">implements</span> ArrayAccess {
<a name="l00030"></a>00030 
<a name="l00031"></a>00031 
<a name="l00037"></a>00037     <span class="keyword">private</span> $xmlFile;
<a name="l00038"></a>00038 
<a name="l00039"></a>00039 
<a name="l00040"></a>00040 
<a name="l00046"></a>00046     <span class="keyword">private</span> $fieldsets = array();
<a name="l00047"></a>00047 
<a name="l00048"></a>00048 
<a name="l00049"></a>00049 
<a name="l00055"></a>00055     <span class="keyword">private</span> $hiddenFields = array();
<a name="l00056"></a>00056 
<a name="l00057"></a>00057 
<a name="l00058"></a>00058 
<a name="l00064"></a>00064     <span class="keyword">private</span> $attributes = array();
<a name="l00065"></a>00065 
<a name="l00066"></a>00066 
<a name="l00067"></a>00067 
<a name="l00073"></a><a class="code" href="class_todoyu_form.html#ab2303c817e3b402b77b7f99627b9c319">00073</a>     <span class="keyword">public</span> <a class="code" href="class_todoyu_form.html#ab2303c817e3b402b77b7f99627b9c319">$fields</a> = array();
<a name="l00074"></a>00074 
<a name="l00075"></a>00075 
<a name="l00076"></a>00076 
<a name="l00082"></a>00082     <span class="keyword">private</span> $fieldsetRegister = array();
<a name="l00083"></a>00083 
<a name="l00084"></a>00084 
<a name="l00085"></a>00085 
<a name="l00091"></a>00091     <span class="keyword">private</span> $formdata = array();
<a name="l00092"></a>00092 
<a name="l00093"></a>00093 
<a name="l00094"></a>00094 
<a name="l00100"></a>00100     <span class="keyword">private</span> $idRecord = null;
<a name="l00101"></a>00101 
<a name="l00102"></a>00102 
<a name="l00108"></a>00108     <span class="keyword">private</span> $useRecordID = <span class="keyword">true</span>;
<a name="l00109"></a>00109 
<a name="l00110"></a>00110 
<a name="l00116"></a>00116     <span class="keyword">private</span> $invalidFields = array();
<a name="l00117"></a>00117 
<a name="l00118"></a>00118 
<a name="l00124"></a><a class="code" href="class_todoyu_form.html#a09f2c833c130b4443725fb576d9d5269">00124</a>     <span class="keyword">public</span> <a class="code" href="class_todoyu_form.html#a09f2c833c130b4443725fb576d9d5269">$vars</a>    = array();
<a name="l00125"></a>00125 
<a name="l00126"></a>00126 
<a name="l00132"></a>00132     <span class="keyword">private</span> $validateForm = <span class="keyword">false</span>;
<a name="l00133"></a>00133 
<a name="l00134"></a>00134 
<a name="l00135"></a>00135 
<a name="l00136"></a>00136 
<a name="l00142"></a><a class="code" href="class_todoyu_form.html#ac3d8cb6e84cfe463053fa4e5834debac">00142</a>     <span class="keyword">public</span> function <a class="code" href="class_todoyu_form.html#ac3d8cb6e84cfe463053fa4e5834debac">__construct</a>($xmlFile) {
<a name="l00143"></a>00143         $this-&gt;xmlFile  = <a class="code" href="class_todoyu_file_manager.html#aa39c49d884a7e1f0b7fcd7fa7d5638a3">TodoyuFileManager::pathAbsolute</a>($xmlFile);
<a name="l00144"></a>00144 
<a name="l00145"></a>00145             <span class="comment">// Load all available form configuration</span>
<a name="l00146"></a>00146         <a class="code" href="class_todoyu_extensions.html#a17e829718c392185f5ebee27fdd4392e">TodoyuExtensions::loadAllForm</a>();
<a name="l00147"></a>00147 
<a name="l00148"></a>00148             <span class="comment">// Parse the XML file into this form</span>
<a name="l00149"></a>00149         <a class="code" href="class_todoyu_form_xml_parser.html#aba79dd0d19d45c6b8da006af8f604cda">TodoyuFormXmlParser::parse</a>($this, $this-&gt;xmlFile);
<a name="l00150"></a>00150     }
<a name="l00151"></a>00151 
<a name="l00152"></a>00152 
<a name="l00153"></a>00153 
<a name="l00160"></a><a class="code" href="class_todoyu_form.html#abc8e9e31bb15c8a44c3210ec551407c8">00160</a>     <span class="keyword">public</span> function <a class="code" href="class_todoyu_form.html#abc8e9e31bb15c8a44c3210ec551407c8">__get</a>($name) {
<a name="l00161"></a>00161         <span class="keywordflow">return</span> $this-&gt;<a class="code" href="class_todoyu_form.html#ab9a7898735904ee695a9d4d87e40ef52">getFieldset</a>($name);
<a name="l00162"></a>00162     }
<a name="l00163"></a>00163 
<a name="l00164"></a>00164 
<a name="l00165"></a>00165 
<a name="l00173"></a><a class="code" href="class_todoyu_form.html#a6d897d7b7127332a9bd142e59a43ba76">00173</a>     <span class="keyword">public</span> function <a class="code" href="class_todoyu_form.html#a6d897d7b7127332a9bd142e59a43ba76">__set</a>($name, <a class="code" href="class_todoyu_fieldset.html">TodoyuFieldset</a> $fieldset) {
<a name="l00174"></a>00174         $this-&gt;fieldsets[$name] = $fieldset;
<a name="l00175"></a>00175     }
<a name="l00176"></a>00176 
<a name="l00177"></a>00177 
<a name="l00178"></a>00178 
<a name="l00186"></a><a class="code" href="class_todoyu_form.html#a8f132f051b7cd7d570ccb9f6e2bb4201">00186</a>     <span class="keyword">public</span> function <a class="code" href="class_todoyu_form.html#a8f132f051b7cd7d570ccb9f6e2bb4201">__isset</a>($name) {
<a name="l00187"></a>00187         <span class="keywordflow">return</span> $this-&gt;<a class="code" href="class_todoyu_form.html#afa614df630afd431ace857767aad127d">hasFieldset</a>($name);
<a name="l00188"></a>00188     }
<a name="l00189"></a>00189 
<a name="l00190"></a>00190 
<a name="l00191"></a>00191 
<a name="l00197"></a><a class="code" href="class_todoyu_form.html#a8a93654c7bfe3f0a9bb7af531e513d44">00197</a>     <span class="keyword">public</span> function <a class="code" href="class_todoyu_form.html#a8a93654c7bfe3f0a9bb7af531e513d44">__unset</a>($name) {
<a name="l00198"></a>00198         $this-&gt;<a class="code" href="class_todoyu_form.html#a28f1f6b6f2d77e184883fbf356263245">removeFieldset</a>($name);
<a name="l00199"></a>00199     }
<a name="l00200"></a>00200 
<a name="l00201"></a>00201 
<a name="l00202"></a>00202 
<a name="l00208"></a><a class="code" href="class_todoyu_form.html#aa804f79b72473ea512a6daef8d4e14a0">00208</a>     <span class="keyword">public</span> function <a class="code" href="class_todoyu_form.html#aa804f79b72473ea512a6daef8d4e14a0">setFormData</a>(array $formdata = array()) {
<a name="l00209"></a>00209         $this-&gt;formdata = $formdata;
<a name="l00210"></a>00210 
<a name="l00211"></a>00211         $this-&gt;<a class="code" href="class_todoyu_form.html#a3433c4655bb0f94a66534a2158a827f8">updateFieldValues</a>();
<a name="l00212"></a>00212     }
<a name="l00213"></a>00213 
<a name="l00214"></a>00214 
<a name="l00215"></a>00215 
<a name="l00221"></a><a class="code" href="class_todoyu_form.html#aecdf106360b068b6a8e7f47bbf0a568c">00221</a>     <span class="keyword">public</span> function <a class="code" href="class_todoyu_form.html#aecdf106360b068b6a8e7f47bbf0a568c">addFormData</a>(array <a class="code" href="projectrole_8php.html#a52040912826b490efa3dd0e7f42e1c3f">$data</a>) {
<a name="l00222"></a>00222         $this-&gt;formdata = array_merge($this-&gt;formdata, $data);
<a name="l00223"></a>00223 
<a name="l00224"></a>00224         $this-&gt;<a class="code" href="class_todoyu_form.html#a3433c4655bb0f94a66534a2158a827f8">updateFieldValues</a>();
<a name="l00225"></a>00225     }
<a name="l00226"></a>00226 
<a name="l00227"></a>00227 
<a name="l00228"></a>00228 
<a name="l00234"></a><a class="code" href="class_todoyu_form.html#a8fb3befda17ddc4317b8d2c344fa7e0e">00234</a>     <span class="keyword">public</span> function <a class="code" href="class_todoyu_form.html#a8fb3befda17ddc4317b8d2c344fa7e0e">getFormData</a>() {
<a name="l00235"></a>00235         <span class="keywordflow">return</span> $this-&gt;formdata;
<a name="l00236"></a>00236     }
<a name="l00237"></a>00237 
<a name="l00238"></a>00238 
<a name="l00239"></a>00239 
<a name="l00246"></a><a class="code" href="class_todoyu_form.html#a90522b5115ae2d26b8f8677253d9edb6">00246</a>     <span class="keyword">public</span> function <a class="code" href="class_todoyu_form.html#a90522b5115ae2d26b8f8677253d9edb6">setFieldFormData</a>($fieldname, $value) {
<a name="l00247"></a>00247         $this-&gt;formdata[$fieldname] = $value;
<a name="l00248"></a>00248     }
<a name="l00249"></a>00249 
<a name="l00250"></a>00250 
<a name="l00251"></a>00251 
<a name="l00257"></a><a class="code" href="class_todoyu_form.html#ae092063ce56438cde1ec2079ce0a2a1d">00257</a>     <span class="keyword">public</span> function <a class="code" href="class_todoyu_form.html#ae092063ce56438cde1ec2079ce0a2a1d">setRecordID</a>($idRecord) {
<a name="l00258"></a>00258         $this-&gt;idRecord = $idRecord;
<a name="l00259"></a>00259     }
<a name="l00260"></a>00260 
<a name="l00261"></a>00261 
<a name="l00262"></a>00262 
<a name="l00269"></a><a class="code" href="class_todoyu_form.html#a492fdc0a33a84509a581f30b4f66e1f9">00269</a>     <span class="keyword">public</span> function <a class="code" href="class_todoyu_form.html#a492fdc0a33a84509a581f30b4f66e1f9">getRecordID</a>() {
<a name="l00270"></a>00270         <span class="keywordflow">if</span>( ! is_null($this-&gt;idRecord) ) {
<a name="l00271"></a>00271             <span class="keywordflow">return</span> $this-&gt;idRecord;
<a name="l00272"></a>00272         } elseif( isset($this-&gt;formdata[<span class="stringliteral">&apos;id&apos;</span>]) ) {
<a name="l00273"></a>00273             <span class="keywordflow">return</span> intval($this-&gt;formdata[<span class="stringliteral">&apos;id&apos;</span>]);
<a name="l00274"></a>00274         } <span class="keywordflow">else</span> {
<a name="l00275"></a>00275             <span class="keywordflow">return</span> 0;
<a name="l00276"></a>00276         }
<a name="l00277"></a>00277     }
<a name="l00278"></a>00278 
<a name="l00279"></a>00279 
<a name="l00280"></a>00280 
<a name="l00286"></a><a class="code" href="class_todoyu_form.html#a1dd1370145e5beb2b793fd2addbee348">00286</a>     <span class="keyword">public</span> function <a class="code" href="class_todoyu_form.html#a1dd1370145e5beb2b793fd2addbee348">setVars</a>(array <a class="code" href="class_todoyu_form.html#a09f2c833c130b4443725fb576d9d5269">$vars</a>) {
<a name="l00287"></a>00287         $this-&gt;vars = $vars;
<a name="l00288"></a>00288     }
<a name="l00289"></a>00289 
<a name="l00290"></a>00290 
<a name="l00291"></a>00291 
<a name="l00298"></a><a class="code" href="class_todoyu_form.html#a65e9e5a7081d7b0d0e7f50ec77eff848">00298</a>     <span class="keyword">public</span> function <a class="code" href="class_todoyu_form.html#a65e9e5a7081d7b0d0e7f50ec77eff848">getVar</a>($varName) {
<a name="l00299"></a>00299         <span class="keywordflow">return</span> $this-&gt;vars[$varName];
<a name="l00300"></a>00300     }
<a name="l00301"></a>00301 
<a name="l00302"></a>00302 
<a name="l00303"></a>00303 
<a name="l00308"></a><a class="code" href="class_todoyu_form.html#a3433c4655bb0f94a66534a2158a827f8">00308</a>     <span class="keyword">protected</span> function <a class="code" href="class_todoyu_form.html#a3433c4655bb0f94a66534a2158a827f8">updateFieldValues</a>() {
<a name="l00309"></a>00309 <span class="comment">//      $dataBaseRelations = array();</span>
<a name="l00310"></a>00310 
<a name="l00311"></a>00311         <span class="comment">// Update fields</span>
<a name="l00312"></a>00312         <span class="keywordflow">foreach</span>( $this-&gt;fields as $name =&gt; <a class="code" href="acknowledged__tasks_8php.html#a83e4d6721f3491a4fd780dbd3ce1a3c0">$field</a> ) {
<a name="l00313"></a>00313             $value = $this-&gt;formdata[$name];
<a name="l00314"></a>00314             <span class="keywordflow">if</span>( ! is_null($value)) {
<a name="l00315"></a>00315                 <a class="code" href="acknowledged__tasks_8php.html#a83e4d6721f3491a4fd780dbd3ce1a3c0">$field</a>-&gt;setValue($value);
<a name="l00316"></a>00316             }
<a name="l00317"></a>00317 
<a name="l00318"></a>00318 <span class="comment">//          if( $this-&gt;getValidateForm() )  {</span>
<a name="l00319"></a>00319 <span class="comment">//              $this-&gt;validateField($field);</span>
<a name="l00320"></a>00320 <span class="comment">//          }</span>
<a name="l00321"></a>00321         }
<a name="l00322"></a>00322 
<a name="l00323"></a>00323             <span class="comment">// Update hidden fields</span>
<a name="l00324"></a>00324         <span class="keywordflow">foreach</span>( $this-&gt;hiddenFields as $name =&gt; $value ) {
<a name="l00325"></a>00325             $newValue = $this-&gt;formdata[$name];
<a name="l00326"></a>00326 
<a name="l00327"></a>00327             <span class="keywordflow">if</span>( ! is_null($newValue) ) {
<a name="l00328"></a>00328                 $this-&gt;hiddenFields[$name][<span class="stringliteral">&apos;value&apos;</span>] = $newValue;
<a name="l00329"></a>00329             }
<a name="l00330"></a>00330         }
<a name="l00331"></a>00331     }
<a name="l00332"></a>00332 
<a name="l00333"></a>00333 
<a name="l00334"></a>00334 
<a name="l00340"></a><a class="code" href="class_todoyu_form.html#aef49a9f9ffd34b3269bb42aa86f41a01">00340</a>     <span class="keyword">protected</span> function <a class="code" href="class_todoyu_form.html#aef49a9f9ffd34b3269bb42aa86f41a01">validateField</a>(<a class="code" href="acknowledged__tasks_8php.html#a83e4d6721f3491a4fd780dbd3ce1a3c0">$field</a>)    {
<a name="l00341"></a>00341         $this-&gt;<a class="code" href="class_todoyu_form.html#a8a0aa3ab81c38813cc1d5dc1454f0ae3">checkRequiredFields</a>(<a class="code" href="acknowledged__tasks_8php.html#a83e4d6721f3491a4fd780dbd3ce1a3c0">$field</a>);
<a name="l00342"></a>00342     }
<a name="l00343"></a>00343 
<a name="l00344"></a>00344 
<a name="l00345"></a>00345 
<a name="l00352"></a><a class="code" href="class_todoyu_form.html#a8a0aa3ab81c38813cc1d5dc1454f0ae3">00352</a>     <span class="keyword">protected</span> function <a class="code" href="class_todoyu_form.html#a8a0aa3ab81c38813cc1d5dc1454f0ae3">checkRequiredFields</a>(<a class="code" href="acknowledged__tasks_8php.html#a83e4d6721f3491a4fd780dbd3ce1a3c0">$field</a>)  {
<a name="l00353"></a>00353         <span class="keywordflow">if</span>( <a class="code" href="acknowledged__tasks_8php.html#a83e4d6721f3491a4fd780dbd3ce1a3c0">$field</a>-&gt;hasAttribute(<span class="stringliteral">&apos;required&apos;</span>) )  {
<a name="l00354"></a>00354             <span class="keywordflow">if</span>( ! <a class="code" href="class_todoyu_validator.html#ab0197908a6a06ef87646492de3a03838">TodoyuValidator::isNotEmpty</a>($this-&gt;formdata[<a class="code" href="acknowledged__tasks_8php.html#a83e4d6721f3491a4fd780dbd3ce1a3c0">$field</a>-&gt;getName()]) ) {
<a name="l00355"></a>00355                 $this-&gt;invalidFields[<a class="code" href="acknowledged__tasks_8php.html#a83e4d6721f3491a4fd780dbd3ce1a3c0">$field</a>-&gt;getName()] = <span class="keyword">true</span>;
<a name="l00356"></a>00356                 <a class="code" href="acknowledged__tasks_8php.html#a83e4d6721f3491a4fd780dbd3ce1a3c0">$field</a>-&gt;setAttribute(<span class="stringliteral">&apos;errorLabel&apos;</span>, <span class="stringliteral">&apos;LLL:form.field.isrequired&apos;</span>);
<a name="l00357"></a>00357                 <a class="code" href="acknowledged__tasks_8php.html#a83e4d6721f3491a4fd780dbd3ce1a3c0">$field</a>-&gt;setAttribute(<span class="stringliteral">&apos;hasError&apos;</span>, <span class="keyword">true</span>);
<a name="l00358"></a>00358             }
<a name="l00359"></a>00359         }
<a name="l00360"></a>00360     }
<a name="l00361"></a>00361 
<a name="l00362"></a>00362 
<a name="l00363"></a>00363 
<a name="l00370"></a><a class="code" href="class_todoyu_form.html#ab9a7898735904ee695a9d4d87e40ef52">00370</a>     <span class="keyword">public</span> function <a class="code" href="class_todoyu_form.html#ab9a7898735904ee695a9d4d87e40ef52">getFieldset</a>($name) {
<a name="l00371"></a>00371         <span class="keywordflow">return</span> $this-&gt;fieldsetRegister[$name];
<a name="l00372"></a>00372     }
<a name="l00373"></a>00373 
<a name="l00374"></a>00374 
<a name="l00375"></a>00375 
<a name="l00383"></a><a class="code" href="class_todoyu_form.html#a7833cb26bb39d1ad23ba1fab5a74a27e">00383</a>     <span class="keyword">public</span> function <a class="code" href="class_todoyu_form.html#a7833cb26bb39d1ad23ba1fab5a74a27e">addFieldset</a>($name, <a class="code" href="class_todoyu_fieldset.html">TodoyuFieldset</a> $fieldset = null, $position = null) {
<a name="l00384"></a>00384         <span class="keywordflow">if</span>( is_null($fieldset) ) {
<a name="l00385"></a>00385             $fieldset   = <span class="keyword">new</span> <a class="code" href="class_todoyu_fieldset.html">TodoyuFieldset</a>($this, $name);
<a name="l00386"></a>00386         } <span class="keywordflow">else</span> {
<a name="l00387"></a>00387                 <span class="comment">// Set form parent to this form and register fields in the form</span>
<a name="l00388"></a>00388             $fieldset-&gt;setParent($this);
<a name="l00389"></a>00389             $fieldset-&gt;setFieldsToForm($this);
<a name="l00390"></a>00390         }
<a name="l00391"></a>00391 
<a name="l00392"></a>00392             <span class="comment">// If no position given, append element</span>
<a name="l00393"></a>00393         <span class="keywordflow">if</span>( is_null($position) ) {
<a name="l00394"></a>00394             $this-&gt;fieldsets[$name] = $fieldset;
<a name="l00395"></a>00395         } <span class="keywordflow">else</span> {
<a name="l00396"></a>00396                 <span class="comment">// If position available, insert element at given positon</span>
<a name="l00397"></a>00397             $pos = explode(<span class="charliteral">&apos;:&apos;</span>, $position);
<a name="l00398"></a>00398 
<a name="l00399"></a>00399             $this-&gt;fieldsets = <a class="code" href="class_todoyu_array.html#a2541ba934a1c9574ff1eb656af137b23">TodoyuArray::insertElement</a>($this-&gt;fieldsets, $name, $fieldset, $pos[0], $pos[1]);
<a name="l00400"></a>00400         }
<a name="l00401"></a>00401 
<a name="l00402"></a>00402             <span class="comment">// Register fieldset</span>
<a name="l00403"></a>00403         $this-&gt;<a class="code" href="class_todoyu_form.html#a67239077a504b27325badcdceaee1568">registerFieldset</a>($name, $fieldset);
<a name="l00404"></a>00404 
<a name="l00405"></a>00405         <span class="keywordflow">return</span> $fieldset;
<a name="l00406"></a>00406     }
<a name="l00407"></a>00407 
<a name="l00408"></a>00408 
<a name="l00409"></a>00409 
<a name="l00416"></a><a class="code" href="class_todoyu_form.html#a258a98a159d42eabcfbc966794cb16f7">00416</a>     <span class="keyword">public</span> function <a class="code" href="class_todoyu_form.html#a258a98a159d42eabcfbc966794cb16f7">injectFieldset</a>(<a class="code" href="class_todoyu_fieldset.html">TodoyuFieldset</a> $fieldset, $position = null) {
<a name="l00417"></a>00417         $fieldset-&gt;<a class="code" href="class_todoyu_fieldset.html#a12f99134a0ab3e127827767285ae82cf">setFieldsToForm</a>($this);
<a name="l00418"></a>00418 
<a name="l00419"></a>00419             <span class="comment">// Find object to inject fieldset</span>
<a name="l00420"></a>00420         <span class="keywordflow">if</span>( is_null($position) ) {
<a name="l00421"></a>00421             $parentObject   = $this;
<a name="l00422"></a>00422         } <span class="keywordflow">else</span> {
<a name="l00423"></a>00423                 <span class="comment">// Get field(set) name</span>
<a name="l00424"></a>00424             $insertParts    = explode(<span class="charliteral">&apos;:&apos;</span>, $position);
<a name="l00425"></a>00425             <a class="code" href="acknowledged__tasks_8php.html#a83e4d6721f3491a4fd780dbd3ce1a3c0">$field</a>          = $this-&gt;<a class="code" href="class_todoyu_form.html#ae4b46379e22553bb94624a2c6f073a89">getField</a>($insertParts[1]);
<a name="l00426"></a>00426                 <span class="comment">// If name was a field, get its fieldset</span>
<a name="l00427"></a>00427             <span class="keywordflow">if</span>( <a class="code" href="acknowledged__tasks_8php.html#a83e4d6721f3491a4fd780dbd3ce1a3c0">$field</a> instanceof <a class="code" href="class_todoyu_form_element.html">TodoyuFormElement</a> ) {
<a name="l00428"></a>00428                 $parentObject = <a class="code" href="acknowledged__tasks_8php.html#a83e4d6721f3491a4fd780dbd3ce1a3c0">$field</a>-&gt;getFieldset();
<a name="l00429"></a>00429             } <span class="keywordflow">else</span> {
<a name="l00430"></a>00430                     <span class="comment">// If no field was found, the name has to be a fieldset</span>
<a name="l00431"></a>00431                 $parentObject = $this-&gt;<a class="code" href="class_todoyu_form.html#ab9a7898735904ee695a9d4d87e40ef52">getFieldset</a>($insertParts[1]);
<a name="l00432"></a>00432             }
<a name="l00433"></a>00433         }
<a name="l00434"></a>00434 
<a name="l00435"></a>00435             <span class="comment">// Set the parent of the fieldset</span>
<a name="l00436"></a>00436         $fieldset-&gt;<a class="code" href="class_todoyu_fieldset.html#a3b949fc022c82eb25e8650e0e01404fa">setParent</a>($parentObject);
<a name="l00437"></a>00437 
<a name="l00438"></a>00438         <span class="keywordflow">return</span> $parentObject-&gt;addFieldset($fieldset-&gt;<a class="code" href="class_todoyu_fieldset.html#a3d0963e68bb313b163a73f2803c64600">getName</a>(), $fieldset, $position);
<a name="l00439"></a>00439     }
<a name="l00440"></a>00440 
<a name="l00441"></a>00441 
<a name="l00442"></a>00442 
<a name="l00449"></a><a class="code" href="class_todoyu_form.html#ae200d1f3d6a09df9be5323834fe240bd">00449</a>     <span class="keyword">public</span> function <a class="code" href="class_todoyu_form.html#ae200d1f3d6a09df9be5323834fe240bd">addElementsFromXML</a>(<a class="code" href="ext_2dev_2controller_2form_8php.html#aec7b9eb932d6a244586d33c16797dc4a">$xmlPath</a>, $position = null) {
<a name="l00450"></a>00450         <a class="code" href="ext_2dev_2controller_2form_8php.html#aec7b9eb932d6a244586d33c16797dc4a">$xmlPath</a>    = <a class="code" href="class_todoyu_file_manager.html#aa39c49d884a7e1f0b7fcd7fa7d5638a3">TodoyuFileManager::pathAbsolute</a>(<a class="code" href="ext_2dev_2controller_2form_8php.html#aec7b9eb932d6a244586d33c16797dc4a">$xmlPath</a>);
<a name="l00451"></a>00451         <a class="code" href="ext_2dev_2controller_2form_8php.html#a1a4fda4c28a9ee5f91102c023b9501f4">$form</a>       = <a class="code" href="class_todoyu_form.html#a6aed11d79758a2d06062c8cd94bab221">TodoyuFormManager::getForm</a>(<a class="code" href="ext_2dev_2controller_2form_8php.html#aec7b9eb932d6a244586d33c16797dc4a">$xmlPath</a>);
<a name="l00452"></a>00452 
<a name="l00453"></a>00453             <span class="comment">// Get fieldsets of the other form</span>
<a name="l00454"></a>00454         $fieldsets  = <a class="code" href="ext_2dev_2controller_2form_8php.html#a1a4fda4c28a9ee5f91102c023b9501f4">$form</a>-&gt;getFieldsets();
<a name="l00455"></a>00455 
<a name="l00456"></a>00456             <span class="comment">// Add all fieldsets to this form</span>
<a name="l00457"></a>00457         <span class="keywordflow">foreach</span>($fieldsets as $fieldset) {
<a name="l00458"></a>00458             $this-&gt;<a class="code" href="class_todoyu_form.html#a258a98a159d42eabcfbc966794cb16f7">injectFieldset</a>($fieldset, $position);
<a name="l00459"></a>00459                 <span class="comment">// Insert all following fieldsets after the current</span>
<a name="l00460"></a>00460             $position = <span class="stringliteral">&apos;after:&apos;</span> . $fieldset-&gt;getName();
<a name="l00461"></a>00461         }
<a name="l00462"></a>00462     }
<a name="l00463"></a>00463 
<a name="l00464"></a>00464 
<a name="l00465"></a>00465 
<a name="l00473"></a><a class="code" href="class_todoyu_form.html#a59fb4119790e210e6c8e6289e5573958">00473</a>     <span class="keyword">public</span> function <a class="code" href="class_todoyu_form.html#a59fb4119790e210e6c8e6289e5573958">addElementsFromXMLAfter</a>(<a class="code" href="ext_2dev_2controller_2form_8php.html#aec7b9eb932d6a244586d33c16797dc4a">$xmlPath</a>, $name) {
<a name="l00474"></a>00474         $this-&gt;<a class="code" href="class_todoyu_form.html#ae200d1f3d6a09df9be5323834fe240bd">addElementsFromXML</a>(<a class="code" href="ext_2dev_2controller_2form_8php.html#aec7b9eb932d6a244586d33c16797dc4a">$xmlPath</a>, <span class="stringliteral">&apos;after:&apos;</span> . $name);
<a name="l00475"></a>00475     }
<a name="l00476"></a>00476 
<a name="l00477"></a>00477 
<a name="l00478"></a>00478 
<a name="l00486"></a><a class="code" href="class_todoyu_form.html#a5946585236c9a09987873498c7d043c6">00486</a>     <span class="keyword">public</span> function <a class="code" href="class_todoyu_form.html#a5946585236c9a09987873498c7d043c6">addElementsFromXMLBefore</a>(<a class="code" href="ext_2dev_2controller_2form_8php.html#aec7b9eb932d6a244586d33c16797dc4a">$xmlPath</a>, $name) {
<a name="l00487"></a>00487         $this-&gt;<a class="code" href="class_todoyu_form.html#ae200d1f3d6a09df9be5323834fe240bd">addElementsFromXML</a>(<a class="code" href="ext_2dev_2controller_2form_8php.html#aec7b9eb932d6a244586d33c16797dc4a">$xmlPath</a>, <span class="stringliteral">&apos;before:&apos;</span> . $name);
<a name="l00488"></a>00488     }
<a name="l00489"></a>00489 
<a name="l00490"></a>00490 
<a name="l00491"></a>00491 
<a name="l00498"></a><a class="code" href="class_todoyu_form.html#a67239077a504b27325badcdceaee1568">00498</a>     <span class="keyword">public</span> function <a class="code" href="class_todoyu_form.html#a67239077a504b27325badcdceaee1568">registerFieldset</a>($name, $fieldset) {
<a name="l00499"></a>00499         $this-&gt;fieldsetRegister[$name] = $fieldset;
<a name="l00500"></a>00500     }
<a name="l00501"></a>00501 
<a name="l00502"></a>00502 
<a name="l00503"></a>00503 
<a name="l00510"></a><a class="code" href="class_todoyu_form.html#afa614df630afd431ace857767aad127d">00510</a>     <span class="keyword">public</span> function <a class="code" href="class_todoyu_form.html#afa614df630afd431ace857767aad127d">hasFieldset</a>($name) {
<a name="l00511"></a>00511         <span class="keywordflow">return</span> isset($this-&gt;fieldsets[$name]);
<a name="l00512"></a>00512     }
<a name="l00513"></a>00513 
<a name="l00514"></a>00514 
<a name="l00515"></a>00515 
<a name="l00521"></a><a class="code" href="class_todoyu_form.html#ab682379da9d073a689fe705e99576521">00521</a>     <span class="keyword">public</span> function <a class="code" href="class_todoyu_form.html#ab682379da9d073a689fe705e99576521">getFieldsetNames</a>() {
<a name="l00522"></a>00522         <span class="keywordflow">return</span> array_keys($this-&gt;fieldsets);
<a name="l00523"></a>00523     }
<a name="l00524"></a>00524 
<a name="l00525"></a>00525 
<a name="l00526"></a>00526 
<a name="l00532"></a><a class="code" href="class_todoyu_form.html#a3785749c32da32c472aeeab73a618c13">00532</a>     <span class="keyword">public</span> function <a class="code" href="class_todoyu_form.html#a3785749c32da32c472aeeab73a618c13">getFieldsets</a>() {
<a name="l00533"></a>00533         <span class="keywordflow">return</span> $this-&gt;fieldsets;
<a name="l00534"></a>00534     }
<a name="l00535"></a>00535 
<a name="l00536"></a>00536 
<a name="l00537"></a>00537 
<a name="l00544"></a><a class="code" href="class_todoyu_form.html#ad05a51a19ff41fb757aac359adb84878">00544</a>     <span class="keyword">public</span> function <a class="code" href="class_todoyu_form.html#ad05a51a19ff41fb757aac359adb84878">getValidateForm</a>() {
<a name="l00545"></a>00545         <span class="keywordflow">return</span> $this-&gt;validateForm;
<a name="l00546"></a>00546     }
<a name="l00547"></a>00547 
<a name="l00548"></a>00548 
<a name="l00549"></a>00549 
<a name="l00550"></a>00550 
<a name="l00556"></a><a class="code" href="class_todoyu_form.html#a28f1f6b6f2d77e184883fbf356263245">00556</a>     <span class="keyword">public</span> function <a class="code" href="class_todoyu_form.html#a28f1f6b6f2d77e184883fbf356263245">removeFieldset</a>($name) {
<a name="l00557"></a>00557         unset($this-&gt;fieldsets[$name]);
<a name="l00558"></a>00558     }
<a name="l00559"></a>00559 
<a name="l00560"></a>00560 
<a name="l00561"></a>00561 
<a name="l00568"></a><a class="code" href="class_todoyu_form.html#a14f08d489c790c82c6207fefdd3d1564">00568</a>     <span class="keyword">public</span> function <a class="code" href="class_todoyu_form.html#a14f08d489c790c82c6207fefdd3d1564">offsetExists</a>($name) {
<a name="l00569"></a>00569         <span class="keywordflow">return</span> $this-&gt;<a class="code" href="class_todoyu_form.html#ac78ba27a41d0291c61326022489d4986">hasAttribute</a>($name);
<a name="l00570"></a>00570     }
<a name="l00571"></a>00571 
<a name="l00572"></a>00572 
<a name="l00573"></a>00573 
<a name="l00579"></a><a class="code" href="class_todoyu_form.html#ac64f6f4bbdf2eaac50e8334a92ea7106">00579</a>     <span class="keyword">public</span> function <a class="code" href="class_todoyu_form.html#ac64f6f4bbdf2eaac50e8334a92ea7106">offsetUnset</a>($name) {
<a name="l00580"></a>00580         $this-&gt;<a class="code" href="class_todoyu_form.html#abbf04707cf678979459a4438e1450876">removeAttribute</a>($name);
<a name="l00581"></a>00581     }
<a name="l00582"></a>00582 
<a name="l00583"></a>00583 
<a name="l00584"></a>00584 
<a name="l00591"></a><a class="code" href="class_todoyu_form.html#ae2295f0c920d0d2352749e2acb735fbb">00591</a>     <span class="keyword">public</span> function <a class="code" href="class_todoyu_form.html#ae2295f0c920d0d2352749e2acb735fbb">offsetSet</a>($name, $value) {
<a name="l00592"></a>00592         $this-&gt;<a class="code" href="class_todoyu_form.html#a545f43e4d937e0e272a4bafe8b411d55">setAttribute</a>($name, $value);
<a name="l00593"></a>00593     }
<a name="l00594"></a>00594 
<a name="l00595"></a>00595 
<a name="l00596"></a>00596 
<a name="l00603"></a><a class="code" href="class_todoyu_form.html#a3d0a0d05f795eea43971f8ab662b3404">00603</a>     <span class="keyword">public</span> function <a class="code" href="class_todoyu_form.html#a3d0a0d05f795eea43971f8ab662b3404">offsetGet</a>($name) {
<a name="l00604"></a>00604         <span class="keywordflow">return</span> $this-&gt;<a class="code" href="class_todoyu_form.html#ae954da422d40fc286691e54679e44c6f">getAttribute</a>($name);
<a name="l00605"></a>00605     }
<a name="l00606"></a>00606 
<a name="l00607"></a>00607 
<a name="l00608"></a>00608 
<a name="l00615"></a><a class="code" href="class_todoyu_form.html#a7f5d7ecb034174c8c160e136b8806b77">00615</a>     <span class="keyword">public</span> function <a class="code" href="class_todoyu_form.html#a7f5d7ecb034174c8c160e136b8806b77">addHiddenField</a>($name, $value, $noStorage = <span class="keyword">false</span>) {
<a name="l00616"></a>00616         $this-&gt;hiddenFields[$name] = array(
<a name="l00617"></a>00617             <span class="stringliteral">&apos;value&apos;</span>     =&gt; $value,
<a name="l00618"></a>00618             <span class="stringliteral">&apos;noStorage&apos;</span> =&gt; $noStorage
<a name="l00619"></a>00619         );
<a name="l00620"></a>00620     }
<a name="l00621"></a>00621 
<a name="l00622"></a>00622 
<a name="l00623"></a>00623 
<a name="l00630"></a><a class="code" href="class_todoyu_form.html#ab2b2b6180aeb332b8e28c28954b6358b">00630</a>     <span class="keyword">public</span> function <a class="code" href="class_todoyu_form.html#ab2b2b6180aeb332b8e28c28954b6358b">getHiddenField</a>($name) {
<a name="l00631"></a>00631         <span class="keywordflow">return</span> $this-&gt;hiddenFields[$name][<span class="stringliteral">&apos;value&apos;</span>];
<a name="l00632"></a>00632     }
<a name="l00633"></a>00633 
<a name="l00634"></a>00634 
<a name="l00635"></a>00635 
<a name="l00642"></a><a class="code" href="class_todoyu_form.html#a0a674a148d448667a8f4012e776a468a">00642</a>     <span class="keyword">public</span> function <a class="code" href="class_todoyu_form.html#a0a674a148d448667a8f4012e776a468a">getHiddenFields</a>($onlyStorage = <span class="keyword">false</span>)   {
<a name="l00643"></a>00643         <a class="code" href="projectrole_8php.html#a52040912826b490efa3dd0e7f42e1c3f">$data</a>   = array();
<a name="l00644"></a>00644 
<a name="l00645"></a>00645         <span class="keywordflow">foreach</span>($this-&gt;hiddenFields as $name =&gt; $config) {
<a name="l00646"></a>00646             <span class="keywordflow">if</span>( $onlyStorage === <span class="keyword">false</span> || $config[<span class="stringliteral">&apos;noStorage&apos;</span>] !== <span class="keyword">true</span> ) {
<a name="l00647"></a>00647                 <a class="code" href="projectrole_8php.html#a52040912826b490efa3dd0e7f42e1c3f">$data</a>[$name] = $config[<span class="stringliteral">&apos;value&apos;</span>];
<a name="l00648"></a>00648             }
<a name="l00649"></a>00649         }
<a name="l00650"></a>00650 
<a name="l00651"></a>00651         <span class="keywordflow">return</span> <a class="code" href="projectrole_8php.html#a52040912826b490efa3dd0e7f42e1c3f">$data</a>;
<a name="l00652"></a>00652     }
<a name="l00653"></a>00653 
<a name="l00654"></a>00654 
<a name="l00655"></a>00655 
<a name="l00662"></a><a class="code" href="class_todoyu_form.html#a18e90ac81e182f36dfa1032e88743241">00662</a>     <span class="keyword">public</span> function <a class="code" href="class_todoyu_form.html#a18e90ac81e182f36dfa1032e88743241">hasHiddenField</a>($name) {
<a name="l00663"></a>00663         <span class="keywordflow">return</span> isset($this-&gt;hiddenFields[$name]);
<a name="l00664"></a>00664     }
<a name="l00665"></a>00665 
<a name="l00666"></a>00666 
<a name="l00667"></a>00667 
<a name="l00673"></a><a class="code" href="class_todoyu_form.html#a2cde694d42dd8ebb662b0612b692c13b">00673</a>     <span class="keyword">public</span> function <a class="code" href="class_todoyu_form.html#a2cde694d42dd8ebb662b0612b692c13b">removeHiddenField</a>($name) {
<a name="l00674"></a>00674         unset($this-&gt;hiddenFields[$name]);
<a name="l00675"></a>00675     }
<a name="l00676"></a>00676 
<a name="l00677"></a>00677 
<a name="l00678"></a>00678 
<a name="l00685"></a><a class="code" href="class_todoyu_form.html#a545f43e4d937e0e272a4bafe8b411d55">00685</a>     <span class="keyword">public</span> function <a class="code" href="class_todoyu_form.html#a545f43e4d937e0e272a4bafe8b411d55">setAttribute</a>($name, $value) {
<a name="l00686"></a>00686         $this-&gt;attributes[$name] = $value;
<a name="l00687"></a>00687     }
<a name="l00688"></a>00688 
<a name="l00689"></a>00689 
<a name="l00690"></a>00690 
<a name="l00697"></a><a class="code" href="class_todoyu_form.html#ae954da422d40fc286691e54679e44c6f">00697</a>     <span class="keyword">public</span> function <a class="code" href="class_todoyu_form.html#ae954da422d40fc286691e54679e44c6f">getAttribute</a>($name) {
<a name="l00698"></a>00698         <span class="keywordflow">return</span> $this-&gt;attributes[$name];
<a name="l00699"></a>00699     }
<a name="l00700"></a>00700 
<a name="l00701"></a>00701 
<a name="l00702"></a>00702 
<a name="l00709"></a><a class="code" href="class_todoyu_form.html#ac78ba27a41d0291c61326022489d4986">00709</a>     <span class="keyword">public</span> function <a class="code" href="class_todoyu_form.html#ac78ba27a41d0291c61326022489d4986">hasAttribute</a>($name) {
<a name="l00710"></a>00710         <span class="keywordflow">return</span> isset($this-&gt;attributes[$name]);
<a name="l00711"></a>00711     }
<a name="l00712"></a>00712 
<a name="l00713"></a>00713 
<a name="l00714"></a>00714 
<a name="l00720"></a><a class="code" href="class_todoyu_form.html#abbf04707cf678979459a4438e1450876">00720</a>     <span class="keyword">public</span> function <a class="code" href="class_todoyu_form.html#abbf04707cf678979459a4438e1450876">removeAttribute</a>($name) {
<a name="l00721"></a>00721         unset($this-&gt;attributes[$name]);
<a name="l00722"></a>00722     }
<a name="l00723"></a>00723 
<a name="l00724"></a>00724 
<a name="l00725"></a>00725 
<a name="l00731"></a><a class="code" href="class_todoyu_form.html#a0366b3b0db0bd90abfc461c372f86599">00731</a>     <span class="keyword">public</span> function <a class="code" href="class_todoyu_form.html#a0366b3b0db0bd90abfc461c372f86599">setAction</a>($action) {
<a name="l00732"></a>00732         $this-&gt;<a class="code" href="class_todoyu_form.html#a545f43e4d937e0e272a4bafe8b411d55">setAttribute</a>(<span class="stringliteral">&apos;action&apos;</span>, $action);
<a name="l00733"></a>00733     }
<a name="l00734"></a>00734 
<a name="l00735"></a>00735 
<a name="l00736"></a>00736 
<a name="l00742"></a><a class="code" href="class_todoyu_form.html#a643c65610f8b3179a8c147cab7cbb652">00742</a>     <span class="keyword">public</span> function <a class="code" href="class_todoyu_form.html#a643c65610f8b3179a8c147cab7cbb652">setMethod</a>($method) {
<a name="l00743"></a>00743         $this-&gt;<a class="code" href="class_todoyu_form.html#a545f43e4d937e0e272a4bafe8b411d55">setAttribute</a>(<span class="stringliteral">&apos;method&apos;</span>, $method);
<a name="l00744"></a>00744     }
<a name="l00745"></a>00745 
<a name="l00746"></a>00746 
<a name="l00747"></a>00747 
<a name="l00753"></a><a class="code" href="class_todoyu_form.html#a67db5a56c9949f916f1b3d0629ff08ea">00753</a>     <span class="keyword">public</span> function <a class="code" href="class_todoyu_form.html#a67db5a56c9949f916f1b3d0629ff08ea">setTarget</a>($target) {
<a name="l00754"></a>00754         $this-&gt;<a class="code" href="class_todoyu_form.html#a545f43e4d937e0e272a4bafe8b411d55">setAttribute</a>(<span class="stringliteral">&apos;target&apos;</span>, $target);
<a name="l00755"></a>00755     }
<a name="l00756"></a>00756 
<a name="l00757"></a>00757 
<a name="l00758"></a>00758 
<a name="l00764"></a><a class="code" href="class_todoyu_form.html#aa91576f527018ec56be56f524417cd60">00764</a>     <span class="keyword">public</span> function <a class="code" href="class_todoyu_form.html#aa91576f527018ec56be56f524417cd60">setEnctype</a>($enctype) {
<a name="l00765"></a>00765         $this-&gt;<a class="code" href="class_todoyu_form.html#a545f43e4d937e0e272a4bafe8b411d55">setAttribute</a>(<span class="stringliteral">&apos;enctype&apos;</span>, $enctype);
<a name="l00766"></a>00766     }
<a name="l00767"></a>00767 
<a name="l00768"></a>00768 
<a name="l00769"></a>00769 
<a name="l00777"></a><a class="code" href="class_todoyu_form.html#a2fe666694997d047711d7653eca2f132">00777</a>     <span class="keyword">public</span> function <a class="code" href="class_todoyu_form.html#a2fe666694997d047711d7653eca2f132">setName</a>($name) {
<a name="l00778"></a>00778         $this-&gt;<a class="code" href="class_todoyu_form.html#a545f43e4d937e0e272a4bafe8b411d55">setAttribute</a>(<span class="stringliteral">&apos;name&apos;</span>, $name);
<a name="l00779"></a>00779     }
<a name="l00780"></a>00780 
<a name="l00781"></a>00781 
<a name="l00782"></a>00782 
<a name="l00788"></a><a class="code" href="class_todoyu_form.html#a3d0963e68bb313b163a73f2803c64600">00788</a>     <span class="keyword">public</span> function <a class="code" href="class_todoyu_form.html#a3d0963e68bb313b163a73f2803c64600">getName</a>() {
<a name="l00789"></a>00789         <span class="keywordflow">return</span> $this-&gt;<a class="code" href="class_todoyu_form.html#ae954da422d40fc286691e54679e44c6f">getAttribute</a>(<span class="stringliteral">&apos;name&apos;</span>);
<a name="l00790"></a>00790     }
<a name="l00791"></a>00791 
<a name="l00792"></a>00792 
<a name="l00793"></a>00793 
<a name="l00799"></a><a class="code" href="class_todoyu_form.html#a2779b74e960d2f1d3f597764e3d4cc40">00799</a>     <span class="keyword">public</span> function <a class="code" href="class_todoyu_form.html#a2779b74e960d2f1d3f597764e3d4cc40">setUseRecordID</a>($use = <span class="keyword">true</span>) {
<a name="l00800"></a>00800         $this-&gt;useRecordID = $use;
<a name="l00801"></a>00801     }
<a name="l00802"></a>00802 
<a name="l00803"></a>00803 
<a name="l00804"></a>00804 
<a name="l00810"></a><a class="code" href="class_todoyu_form.html#a6aed11d79758a2d06062c8cd94bab221">00810</a>     <span class="keyword">public</span> function <a class="code" href="class_todoyu_form.html#a6aed11d79758a2d06062c8cd94bab221">getForm</a>() {
<a name="l00811"></a>00811         <span class="keywordflow">return</span> $this;
<a name="l00812"></a>00812     }
<a name="l00813"></a>00813 
<a name="l00814"></a>00814 
<a name="l00815"></a>00815 
<a name="l00823"></a><a class="code" href="class_todoyu_form.html#ae4b46379e22553bb94624a2c6f073a89">00823</a>     <span class="keyword">public</span> function <a class="code" href="class_todoyu_form.html#ae4b46379e22553bb94624a2c6f073a89">getField</a>($name) {
<a name="l00824"></a>00824         <span class="keywordflow">return</span> $this-&gt;fields[$name];
<a name="l00825"></a>00825     }
<a name="l00826"></a>00826 
<a name="l00827"></a>00827 
<a name="l00828"></a>00828 
<a name="l00835"></a><a class="code" href="class_todoyu_form.html#a6592f31ff829eb7e8978796850ded599">00835</a>     <span class="keyword">public</span> function <a class="code" href="class_todoyu_form.html#a6592f31ff829eb7e8978796850ded599">removeField</a>($name, $cleanup = <span class="keyword">false</span>)    {
<a name="l00836"></a>00836         <span class="keywordflow">if</span>( $cleanup ) {
<a name="l00837"></a>00837             $this-&gt;<a class="code" href="class_todoyu_form.html#ae4b46379e22553bb94624a2c6f073a89">getField</a>($name)-&gt;remove();
<a name="l00838"></a>00838         }
<a name="l00839"></a>00839 
<a name="l00840"></a>00840         unset($this-&gt;fields[$name]);
<a name="l00841"></a>00841         unset($this-&gt;formdata[$name]);
<a name="l00842"></a>00842     }
<a name="l00843"></a>00843 
<a name="l00844"></a>00844 
<a name="l00845"></a>00845 
<a name="l00853"></a><a class="code" href="class_todoyu_form.html#a8b5325bff114f081abd89d8ffb7061d3">00853</a>     <span class="keyword">public</span> function <a class="code" href="class_todoyu_form.html#a8b5325bff114f081abd89d8ffb7061d3">getFieldValue</a>($name) {
<a name="l00854"></a>00854         <span class="keywordflow">return</span> $this-&gt;<a class="code" href="class_todoyu_form.html#ae4b46379e22553bb94624a2c6f073a89">getField</a>($name)-&gt;getValue();
<a name="l00855"></a>00855     }
<a name="l00856"></a>00856 
<a name="l00857"></a>00857 
<a name="l00858"></a>00858 
<a name="l00864"></a><a class="code" href="class_todoyu_form.html#a72d2abc98e67c53f3204d8487220317e">00864</a>     <span class="keyword">public</span> function <a class="code" href="class_todoyu_form.html#a72d2abc98e67c53f3204d8487220317e">getFieldnames</a>() {
<a name="l00865"></a>00865         <span class="keywordflow">return</span> array_keys($this-&gt;fields);
<a name="l00866"></a>00866     }
<a name="l00867"></a>00867 
<a name="l00868"></a>00868 
<a name="l00869"></a>00869 
<a name="l00876"></a><a class="code" href="class_todoyu_form.html#a5f00cd7bb92c20d2fa253302425f9c2b">00876</a>     <span class="keyword">public</span> function <a class="code" href="class_todoyu_form.html#a5f00cd7bb92c20d2fa253302425f9c2b">registerField</a>($name, <a class="code" href="class_todoyu_form_element.html">TodoyuFormElement</a> <a class="code" href="acknowledged__tasks_8php.html#a83e4d6721f3491a4fd780dbd3ce1a3c0">$field</a>) {
<a name="l00877"></a>00877         $this-&gt;fields[$name] = $field;
<a name="l00878"></a>00878     }
<a name="l00879"></a>00879 
<a name="l00880"></a>00880 
<a name="l00881"></a>00881 
<a name="l00889"></a><a class="code" href="class_todoyu_form.html#a4041e65822b59196ffab476466472795">00889</a>     <span class="keyword">public</span> function <a class="code" href="class_todoyu_form.html#a4041e65822b59196ffab476466472795">makeID</a>($name = <span class="stringliteral">&apos;&apos;</span>, $type = <span class="stringliteral">&apos;field&apos;</span>) {
<a name="l00890"></a>00890         $notAllowed = array(<span class="charliteral">&apos; &apos;</span>, <span class="charliteral">&apos;_&apos;</span>, <span class="charliteral">&apos;[&apos;</span>, <span class="charliteral">&apos;]&apos;</span>, <span class="stringliteral">&apos;--&apos;</span>);
<a name="l00891"></a>00891         $replace    = <span class="charliteral">&apos;-&apos;</span>;
<a name="l00892"></a>00892         $elementName= trim(<a class="code" href="javascript_8js.html#a653ea8da4d112c6bce1135d086cb38c9">str_replace</a>($notAllowed, $replace, $name));
<a name="l00893"></a>00893 
<a name="l00894"></a>00894         $id     = $this-&gt;<a class="code" href="class_todoyu_form.html#a3d0963e68bb313b163a73f2803c64600">getName</a>();
<a name="l00895"></a>00895 
<a name="l00896"></a>00896         <span class="keywordflow">if</span>( $this-&gt;useRecordID === <span class="keyword">true</span> ) {
<a name="l00897"></a>00897             $id .= <span class="charliteral">&apos;-&apos;</span> . $this-&gt;<a class="code" href="class_todoyu_form.html#a492fdc0a33a84509a581f30b4f66e1f9">getRecordID</a>();
<a name="l00898"></a>00898         }
<a name="l00899"></a>00899 
<a name="l00900"></a>00900         $id .= <span class="charliteral">&apos;-&apos;</span> . $type;
<a name="l00901"></a>00901 
<a name="l00902"></a>00902         <span class="keywordflow">if</span>( $elementName !== <span class="stringliteral">&apos;&apos;</span> ) {
<a name="l00903"></a>00903             $id .= <span class="charliteral">&apos;-&apos;</span> . $elementName;
<a name="l00904"></a>00904         }
<a name="l00905"></a>00905 
<a name="l00906"></a>00906         $count = 1;
<a name="l00907"></a>00907 
<a name="l00908"></a>00908         <span class="keywordflow">while</span>($count != 0)  {
<a name="l00909"></a>00909             $id = <a class="code" href="javascript_8js.html#a653ea8da4d112c6bce1135d086cb38c9">str_replace</a>($notAllowed, $replace, $id, $count);
<a name="l00910"></a>00910         }
<a name="l00911"></a>00911 
<a name="l00912"></a>00912         <span class="keywordflow">return</span> $id;
<a name="l00913"></a>00913     }
<a name="l00914"></a>00914 
<a name="l00915"></a>00915 
<a name="l00916"></a>00916 
<a name="l00924"></a><a class="code" href="class_todoyu_form.html#a4add22e62571c2c32cda35cec81a3ef6">00924</a>     <span class="keyword">public</span> function <a class="code" href="class_todoyu_form.html#a4add22e62571c2c32cda35cec81a3ef6">makeName</a>($name, $multiple = <span class="keyword">false</span>) {
<a name="l00925"></a>00925         <span class="keywordflow">return</span> $this-&gt;<a class="code" href="class_todoyu_form.html#a3d0963e68bb313b163a73f2803c64600">getName</a>() . <span class="charliteral">&apos;[&apos;</span> . $name . <span class="charliteral">&apos;]&apos;</span> . ($multiple?<span class="stringliteral">&apos;[]&apos;</span>:<span class="stringliteral">&apos;&apos;</span>);
<a name="l00926"></a>00926     }
<a name="l00927"></a>00927 
<a name="l00928"></a>00928 
<a name="l00929"></a>00929 
<a name="l00935"></a><a class="code" href="class_todoyu_form.html#a7b37efab7473a1effc29f8be2421f6e3">00935</a>     <span class="keyword">public</span> function <a class="code" href="class_todoyu_form.html#a7b37efab7473a1effc29f8be2421f6e3">isValid</a>() {
<a name="l00936"></a>00936         $isValid    = <span class="keyword">true</span>;
<a name="l00937"></a>00937 
<a name="l00938"></a>00938         $this-&gt;validateForm = <span class="keyword">true</span>;
<a name="l00939"></a>00939 
<a name="l00940"></a>00940         $fieldNames = $this-&gt;<a class="code" href="class_todoyu_form.html#a72d2abc98e67c53f3204d8487220317e">getFieldnames</a>();
<a name="l00941"></a>00941 
<a name="l00942"></a>00942         <span class="keywordflow">foreach</span>($fieldNames as $fieldName) {
<a name="l00943"></a>00943             <span class="keywordflow">if</span>( ! $this-&gt;<a class="code" href="class_todoyu_form.html#ae4b46379e22553bb94624a2c6f073a89">getField</a>($fieldName)-&gt;<a class="code" href="class_todoyu_form.html#a7b37efab7473a1effc29f8be2421f6e3">isValid</a>() ) {
<a name="l00944"></a>00944                 $isValid = <span class="keyword">false</span>;
<a name="l00945"></a>00945                 <a class="code" href="class_todoyu_debug.html#adc1d20befc0f0af3f20834265b0f81ac">TodoyuDebug::printInFirebug</a>($fieldName, <span class="stringliteral">&apos;Invalid form field&apos;</span>);
<a name="l00946"></a>00946             }
<a name="l00947"></a>00947         }
<a name="l00948"></a>00948 
<a name="l00949"></a>00949         <span class="keywordflow">return</span> $isValid;
<a name="l00950"></a>00950     }
<a name="l00951"></a>00951 
<a name="l00952"></a>00952 
<a name="l00953"></a>00953 
<a name="l00961"></a><a class="code" href="class_todoyu_form.html#a23ab150ef021c615cf5550eb67c40f82">00961</a>     <span class="keyword">public</span> function <a class="code" href="class_todoyu_form.html#a23ab150ef021c615cf5550eb67c40f82">parseWithFormData</a>($string) {
<a name="l00962"></a>00962         <span class="keywordflow">foreach</span>($this-&gt;formdata as $key =&gt; $value) {
<a name="l00963"></a>00963             <span class="keywordflow">if</span>( stristr($string, <span class="charliteral">&apos;#&apos;</span> . $key . <span class="charliteral">&apos;#&apos;</span>) ) {
<a name="l00964"></a>00964                 $string = <a class="code" href="javascript_8js.html#a653ea8da4d112c6bce1135d086cb38c9">str_replace</a>(<span class="charliteral">&apos;#&apos;</span> . $key . <span class="charliteral">&apos;#&apos;</span>, (<span class="keywordtype">string</span>)$value, $string);
<a name="l00965"></a>00965             }
<a name="l00966"></a>00966         }
<a name="l00967"></a>00967 
<a name="l00968"></a>00968         <span class="keywordflow">return</span> $string;
<a name="l00969"></a>00969     }
<a name="l00970"></a>00970 
<a name="l00971"></a>00971 
<a name="l00972"></a>00972 
<a name="l00978"></a><a class="code" href="class_todoyu_form.html#a72257b826a11ba202b4090cd6bcfad02">00978</a>     <span class="keyword">public</span> function <a class="code" href="class_todoyu_form.html#a72257b826a11ba202b4090cd6bcfad02">getStorageData</a>(array <a class="code" href="ext_2dev_2controller_2form_8php.html#ab052ac8d8bf958ae51cb1965ca42695d">$formData</a> = null) {
<a name="l00979"></a>00979         <span class="keywordflow">if</span> ( ! is_null(<a class="code" href="ext_2dev_2controller_2form_8php.html#ab052ac8d8bf958ae51cb1965ca42695d">$formData</a>) ) {
<a name="l00980"></a>00980             $this-&gt;<a class="code" href="class_todoyu_form.html#aa804f79b72473ea512a6daef8d4e14a0">setFormData</a>(<a class="code" href="ext_2dev_2controller_2form_8php.html#ab052ac8d8bf958ae51cb1965ca42695d">$formData</a>);
<a name="l00981"></a>00981         }
<a name="l00982"></a>00982 
<a name="l00983"></a>00983         <a class="code" href="projectrole_8php.html#a52040912826b490efa3dd0e7f42e1c3f">$data</a>   = $this-&gt;<a class="code" href="class_todoyu_form.html#a0a674a148d448667a8f4012e776a468a">getHiddenFields</a>(<span class="keyword">true</span>);
<a name="l00984"></a>00984 
<a name="l00985"></a>00985         <span class="keywordflow">foreach</span>($this-&gt;fields as $name =&gt; <a class="code" href="acknowledged__tasks_8php.html#a83e4d6721f3491a4fd780dbd3ce1a3c0">$field</a>) {
<a name="l00986"></a>00986             $value  = <a class="code" href="acknowledged__tasks_8php.html#a83e4d6721f3491a4fd780dbd3ce1a3c0">$field</a>-&gt;getStorageData();
<a name="l00987"></a>00987             <span class="keywordflow">if</span>( $value !== <span class="keyword">false</span> ) {
<a name="l00988"></a>00988                 <a class="code" href="projectrole_8php.html#a52040912826b490efa3dd0e7f42e1c3f">$data</a>[$name] = $value;
<a name="l00989"></a>00989             }
<a name="l00990"></a>00990         }
<a name="l00991"></a>00991 
<a name="l00992"></a>00992         <span class="keywordflow">return</span> <a class="code" href="projectrole_8php.html#a52040912826b490efa3dd0e7f42e1c3f">$data</a>;
<a name="l00993"></a>00993     }
<a name="l00994"></a>00994 
<a name="l00995"></a>00995 
<a name="l01001"></a><a class="code" href="class_todoyu_form.html#a3eaa88dcfadeb9f91421d4e76d1cd54c">01001</a>     <span class="keyword">public</span> function <a class="code" href="class_todoyu_form.html#a3eaa88dcfadeb9f91421d4e76d1cd54c">renderHiddenFields</a>() {
<a name="l01002"></a>01002         $content    = <span class="stringliteral">&apos;&apos;</span>;
<a name="l01003"></a>01003         $template   = <a class="code" href="filterwidgetconf_8php.html#a5256d5171498a1b9833f7a1fc459aa2f">$GLOBALS</a>[<span class="stringliteral">&apos;CONFIG&apos;</span>][<span class="stringliteral">&apos;FORM&apos;</span>][<span class="stringliteral">&apos;templates&apos;</span>][<span class="stringliteral">&apos;hidden&apos;</span>];
<a name="l01004"></a>01004 
<a name="l01005"></a>01005         <span class="keywordflow">foreach</span>( $this-&gt;hiddenFields as $name =&gt; $config ) {
<a name="l01006"></a>01006             <a class="code" href="projectrole_8php.html#a52040912826b490efa3dd0e7f42e1c3f">$data</a>   = array(
<a name="l01007"></a>01007                 <span class="stringliteral">&apos;htmlId&apos;</span>    =&gt; self::makeID($name),
<a name="l01008"></a>01008                 <span class="stringliteral">&apos;htmlName&apos;</span>  =&gt; self::makeName($name),
<a name="l01009"></a>01009                 <span class="stringliteral">&apos;value&apos;</span>     =&gt; htmlspecialchars($config[<span class="stringliteral">&apos;value&apos;</span>])
<a name="l01010"></a>01010             );
<a name="l01011"></a>01011 
<a name="l01012"></a>01012             $content .= <a class="code" href="class_todoyu_form.html#afde88292c44dc59faf017738dae6dffb">render</a>($template, <a class="code" href="projectrole_8php.html#a52040912826b490efa3dd0e7f42e1c3f">$data</a>);
<a name="l01013"></a>01013         }
<a name="l01014"></a>01014 
<a name="l01015"></a>01015         <span class="keywordflow">return</span> $content;
<a name="l01016"></a>01016     }
<a name="l01017"></a>01017 
<a name="l01018"></a>01018 
<a name="l01019"></a>01019 
<a name="l01025"></a>01025     <span class="keyword">private</span> function renderFieldsets() {
<a name="l01026"></a>01026         $content = <span class="stringliteral">&apos;&apos;</span>;
<a name="l01027"></a>01027 
<a name="l01028"></a>01028         <span class="keywordflow">foreach</span>($this-&gt;fieldsets as $fieldset) {
<a name="l01029"></a>01029             $content .= $fieldset-&gt;render();
<a name="l01030"></a>01030         }
<a name="l01031"></a>01031 
<a name="l01032"></a>01032         <span class="keywordflow">return</span> $content;
<a name="l01033"></a>01033     }
<a name="l01034"></a>01034 
<a name="l01035"></a>01035 
<a name="l01036"></a>01036 
<a name="l01042"></a>01042     <span class="keyword">private</span> function getData() {
<a name="l01043"></a>01043         <a class="code" href="projectrole_8php.html#a52040912826b490efa3dd0e7f42e1c3f">$data</a>   =&amp; $this-&gt;attributes;
<a name="l01044"></a>01044 
<a name="l01045"></a>01045         $this-&gt;<a class="code" href="class_todoyu_form.html#a3433c4655bb0f94a66534a2158a827f8">updateFieldValues</a>();
<a name="l01046"></a>01046 
<a name="l01047"></a>01047         <a class="code" href="projectrole_8php.html#a52040912826b490efa3dd0e7f42e1c3f">$data</a>[<span class="stringliteral">&apos;hiddenFields&apos;</span>]   = $this-&gt;<a class="code" href="class_todoyu_form.html#a3eaa88dcfadeb9f91421d4e76d1cd54c">renderHiddenFields</a>();
<a name="l01048"></a>01048         <a class="code" href="projectrole_8php.html#a52040912826b490efa3dd0e7f42e1c3f">$data</a>[<span class="stringliteral">&apos;fieldsets&apos;</span>]      = $this-&gt;renderFieldsets();
<a name="l01049"></a>01049 
<a name="l01050"></a>01050         <a class="code" href="projectrole_8php.html#a52040912826b490efa3dd0e7f42e1c3f">$data</a>[<span class="stringliteral">&apos;htmlId&apos;</span>]         = $this-&gt;<a class="code" href="class_todoyu_form.html#a4041e65822b59196ffab476466472795">makeID</a>(<span class="stringliteral">&apos;&apos;</span>, <span class="stringliteral">&apos;form&apos;</span>);
<a name="l01051"></a>01051 
<a name="l01052"></a>01052         <span class="keywordflow">if</span>( ! $this-&gt;<a class="code" href="class_todoyu_form.html#ac78ba27a41d0291c61326022489d4986">hasAttribute</a>(<span class="stringliteral">&apos;action&apos;</span>) ) {
<a name="l01053"></a>01053             $this-&gt;<a class="code" href="class_todoyu_form.html#a545f43e4d937e0e272a4bafe8b411d55">setAttribute</a>(<span class="stringliteral">&apos;action&apos;</span>, <a class="code" href="class_todoyu_request.html#a3bfcb812a3e3fcccfab04743f0680b28">TodoyuRequest::getRequestUrl</a>());
<a name="l01054"></a>01054         }
<a name="l01055"></a>01055 
<a name="l01056"></a>01056         <span class="keywordflow">if</span>( ! $this-&gt;<a class="code" href="class_todoyu_form.html#ac78ba27a41d0291c61326022489d4986">hasAttribute</a>(<span class="stringliteral">&apos;method&apos;</span>) ) {
<a name="l01057"></a>01057             $this-&gt;<a class="code" href="class_todoyu_form.html#a545f43e4d937e0e272a4bafe8b411d55">setAttribute</a>(<span class="stringliteral">&apos;method&apos;</span>, <span class="stringliteral">&apos;post&apos;</span>);
<a name="l01058"></a>01058         }
<a name="l01059"></a>01059 
<a name="l01060"></a>01060         <span class="keywordflow">if</span>( $this-&gt;<a class="code" href="class_todoyu_form.html#ac78ba27a41d0291c61326022489d4986">hasAttribute</a>(<span class="stringliteral">&apos;onsubmit&apos;</span>) ) {
<a name="l01061"></a>01061             $this-&gt;<a class="code" href="class_todoyu_form.html#a545f43e4d937e0e272a4bafe8b411d55">setAttribute</a>(<span class="stringliteral">&apos;onsubmit&apos;</span>, $this-&gt;<a class="code" href="class_todoyu_form.html#a23ab150ef021c615cf5550eb67c40f82">parseWithFormData</a>($this-&gt;<a class="code" href="class_todoyu_form.html#ae954da422d40fc286691e54679e44c6f">getAttribute</a>(<span class="stringliteral">&apos;onsubmit&apos;</span>)));
<a name="l01062"></a>01062         }
<a name="l01063"></a>01063 
<a name="l01064"></a>01064         <span class="keywordflow">return</span> <a class="code" href="projectrole_8php.html#a52040912826b490efa3dd0e7f42e1c3f">$data</a>;
<a name="l01065"></a>01065     }
<a name="l01066"></a>01066 
<a name="l01067"></a>01067 
<a name="l01068"></a>01068 
<a name="l01075"></a><a class="code" href="class_todoyu_form.html#a1049ae0dbb665511f689cfe12e5bb4c9">01075</a>     <span class="keyword">public</span> function <a class="code" href="class_todoyu_form.html#a1049ae0dbb665511f689cfe12e5bb4c9">renderFieldset</a>($fieldsetName) {
<a name="l01076"></a>01076         <span class="keywordflow">return</span> $this-&gt;<a class="code" href="class_todoyu_form.html#ab9a7898735904ee695a9d4d87e40ef52">getFieldset</a>($fieldsetName)-&gt;render();
<a name="l01077"></a>01077     }
<a name="l01078"></a>01078 
<a name="l01079"></a>01079 
<a name="l01080"></a>01080 
<a name="l01086"></a><a class="code" href="class_todoyu_form.html#afde88292c44dc59faf017738dae6dffb">01086</a>     <span class="keyword">public</span> function <a class="code" href="class_todoyu_form.html#afde88292c44dc59faf017738dae6dffb">render</a>() {
<a name="l01087"></a>01087         $tmpl   = <a class="code" href="filterwidgetconf_8php.html#a5256d5171498a1b9833f7a1fc459aa2f">$GLOBALS</a>[<span class="stringliteral">&apos;CONFIG&apos;</span>][<span class="stringliteral">&apos;FORM&apos;</span>][<span class="stringliteral">&apos;templates&apos;</span>][<span class="stringliteral">&apos;form&apos;</span>];
<a name="l01088"></a>01088         <a class="code" href="projectrole_8php.html#a52040912826b490efa3dd0e7f42e1c3f">$data</a>   = $this-&gt;getData();
<a name="l01089"></a>01089 
<a name="l01090"></a>01090         <span class="keywordflow">return</span> <a class="code" href="class_todoyu_form.html#afde88292c44dc59faf017738dae6dffb">render</a>($tmpl, <a class="code" href="projectrole_8php.html#a52040912826b490efa3dd0e7f42e1c3f">$data</a>);
<a name="l01091"></a>01091     }
<a name="l01092"></a>01092 }
<a name="l01093"></a>01093 
<a name="l01094"></a>01094 
<a name="l01095"></a>01095 ?&gt;
</pre></div></div>
<hr size="1"/><address style="text-align: right;"><small>Erzeugt am Tue Dec 1 18:32:31 2009 f√ºr Todoyu von&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
